<!DOCTYPE html>
<html>
  <head>
    <meta charset = "UTF-8" />
    <meta name = "viewport" content = "width = device-width, initial-scale = 1.0"> 
    <title>Translink Game</title>

    <link href = "css/bootstrap.min.css" rel = "stylesheet">
    <link href = "css/style.css" rel = "stylesheet" type = "text/css">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Condensed' rel='stylesheet' type='text/css'>

    <script src = "js/jquery-1.11.0.min.js"></script>
    <script src = "js/bootstrap.min.js"></script>


  </head>
  <body>
    <div class = "container-fluid">
      

      <nav>
                
                  <p class = "actionTitle">Action Title</p>

                  <div class="actionDropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Actions<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li id = "checkIn"><a href="#">Check In</a></li>
                      <li><a href="#">Action2</a></li>
                      <li id = "stopTracking"><a href="#">Stop tracking me</a></li>
                      <li role="separator" class="divider"></li>
                      <li><a href="#">Checkout</a></li>
                    </ul>
                  </div>
      </nav>

      <!-- check in modal -->
      <div class="modal fade" id="checkInModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="modalLabel">Check In</h4>
            </div>
            <div class="modal-body">
              <form action="newplayer.php" method="post" id="newPlayerForm">
                 <div class="form-group">
                  <!-- <label for="recipient-name" class="form-control-label">Email : </label> -->
                  <input type="text" class="form-control" placeholder = "Name" id="playerName" name = "playerName">
                </div>
                <div class="form-group">
                  <!-- <label for="recipient-name" class="form-control-label">Email : </label> -->
                  <input type="text" class="form-control" placeholder = "Email" id="playerEmail" name = "playerEmail">
                </div>
                <div class="form-group">
                  <!-- <label for="message-text" class="form-control-label">Password :</label> -->
                  <input type="text" class="form-control" placeholder = "Password" id="playerPsrd" name = "playerPsrd">
                </div>
                <button class="btn btn-primary" type="submit">Start</button>
              </form>
            </div>
            <div class="modal-footer">
              <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
              <!-- <button type="button" class="btn btn-primary" type="submit">Start</button> -->
            </div>
          </div>
        </div>
      </div>

      <div class = "row">
        <div id = "map" class = "col-xs-12"></div>
      </div>
      

      <div class = "row text-center navTab">
        <div class = "col-xs-3 navTabItem">
          <i class = "glyphicon glyphicon-map-marker"></i>    
        </div>

        <div class = "col-xs-3 navTabItem">
          <i class = "glyphicon glyphicon-camera"></i>
        </div>

        <div class = "col-xs-3 navTabItem">
          <i class = "glyphicon glyphicon-tags"></i>
        </div>

        <div class = "col-xs-3 navTabItem">
          <i class = "glyphicon glyphicon-user"></i>
        </div>
        
        
      </div>

      <!-- Message Modal -->
      <div class="modal fade" id="messageModal" role="dialog">
        <div class="modal-dialog modal-sm">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Message from Translink Game</h4>
            </div>
            <div class="modal-body" id = "message">
              <!-- <p>This is a small modal.</p> -->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
    $(document).ready(function(){

    $("#newPlayerForm").submit( function() {

        $.ajax({
            url     : $(this).attr('action'),
            type    : $(this).attr('method'),
            data    : $(this).serialize(),
            success : function() {
                         $("#newPlayerForm")[0].reset();
                         // $("#modal_success").modal();
                         
                         // alert('Form is successfully submitted');       
                      },
            error   : function(){
                         // $("#modal_fail")[0].modal();
                         // alert('Something wrong');
                      }
        });

        return false;
    });

});

   

    $('#checkIn').click(function(){
      $('#checkInModal').modal('show');
    });

    function initMap() {

        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {
            center: {lat: 49.246292, lng: -123.116226},
            zoom: 16,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        });
        
        // get current location and draw a marker(a circle) on that location
        //when mobile device moves, draw a polyline on the route, and a marker(a circle) on each changed locations
        geoCurrentLoc(map);


        // watchLoc(map);

      }

     
    </script>
    <!-- use google map kpi -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKLsVCt_3B0dMuzXH1tyZs8tjUIDsJC68&callback=initMap">
    </script>
    <script src = "js/geoCurrentLoc.js"></script>
    <script src = "js/drawMarker.js"></script>
    <script src = "js/watchLoc.js"></script>

  </body>
</html>